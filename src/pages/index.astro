---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
---

<BaseLayout title="Home">
  <style>
    h1 {
      margin: 0 0 6px 0;
      color: var(--accent); /* green heading */
      font-size: 1.1rem;
    }
    p.subhead {
      margin: 0 0 14px 0;
      color: #ccc;
      font-size: .9rem;
    }

    section.posts { margin-top: 16px; }
    .post-preview {
      display: flex;
      gap: 14px;
      padding: 12px 0;
      border-top: 1px solid var(--border);
      align-items: flex-start;
    }
    .post-thumb {
      width: 20%;
      min-width: 140px;
      max-width: 220px;
      aspect-ratio: 16/9;
      object-fit: cover;
      display: block;
    }
    .post-meta { flex: 1; }
    .post-title {
      font-weight: 700;
      margin: 0;
      line-height: 1.2;
    }
    .post-date {
      font-size: .75rem;
      color: var(--muted);
      margin-top: 2px;
    }
    .post-desc {
      margin: 8px 0 0;
      color: #ccc;
      font-size: .9rem;
    }
  </style>

  <section>
    <h1>Welcome to Project Fawn</h1>
    <p class="subhead">fully custom open-sourced 3D printed ski boots</p>
  </section>

  <section class="posts">
    <h2 style="font-size:.95rem; margin: 0 0 10px 0;">Recent Posts</h2>

    {posts.map((post) => (
      <article class="post-preview">
        {post.data.image && (
          <img class="post-thumb" src={post.data.image} alt={`${post.data.title} thumbnail`} />
        )}
        <div class="post-meta">
          <h3 class="post-title">
            <a href={`/post/${post.slug}`} style="color:inherit; text-decoration:none;">
              {post.data.title}
            </a>
          </h3>
          <div class="post-date">{post.data.date}</div>
          {post.data.description && <p class="post-desc">{post.data.description}</p>}
        </div>
      </article>
    ))}
  </section>
</BaseLayout>


